

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Demos &mdash; EVM-for-CCF  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API" href="api.html" />
    <link rel="prev" title="RPC Interface" href="rpcinterface.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> EVM-for-CCF
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation.html">Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="rpcinterface.html">RPC Interface</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Demos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#python">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#json-scenario">JSON Scenario</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EVM-for-CCF</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Demos</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/Microsoft/EVM-for-CCF/blob/master/sphinx/source/demos.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="demos">
<h1>Demos<a class="headerlink" href="#demos" title="Permalink to this headline">¶</a></h1>
<p>A client currently needs to send <a class="reference external" href="https://www.jsonrpc.org/specification">JSON-RPC</a> requests over <a class="reference external" href="https://tools.ietf.org/html/rfc5246">TLS</a>, as with other CCF apps (HTTP and WebSockets support is coming soon).</p>
<p>The following demos show deployment of an <a class="reference external" href="https://theethereum.wiki/w/index.php/ERC20_Token_Standard">ERC20</a> contract, followed by transactions which transfer tokens between multiple accounts. The Solidity source of the contract is in <code class="docutils literal notranslate"><span class="pre">tests/contracts/ERC20.sol</span></code>, and the precompiled result <code class="docutils literal notranslate"><span class="pre">ERC20_combined.sol</span></code> is parsed by the demos.</p>
<p>The commands to run each of these demos (and the environment variables that may need to be set) can be seen by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ctest -VV -N
</pre></div>
</div>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>The source for this demo is in <code class="docutils literal notranslate"><span class="pre">samples/erc20_deploy_and_transfer.py</span></code>. It uses a <a class="reference external" href="https://github.com/ethereum/web3.py">web3.py</a> with a custom <cite>provider</cite> to communicate with CCF. The demo deploys a new CCF network consisting of 2 local nodes, deploys an instance of the parsed ERC20 contract, and then transfers tokens between ethereum addresses.</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">Caller</span></code> defined in <code class="docutils literal notranslate"><span class="pre">samples/utils.py</span></code> is used to work around some assumptions in <code class="docutils literal notranslate"><span class="pre">web3.py</span></code>. For instance the <code class="docutils literal notranslate"><span class="pre">gas</span></code> and <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code> fields must be filled in explicitly, or else <code class="docutils literal notranslate"><span class="pre">web3</span></code> will make unsupported RPC calls to find sensible values. It is possible to use this provider to interact with EVM-for-CCF from a live terminal, but care must be taken to avoid these unsupported RPCs.</p>
</div>
<div class="section" id="json-scenario">
<h2>JSON Scenario<a class="headerlink" href="#json-scenario" title="Permalink to this headline">¶</a></h2>
<p>This demo builds on CCF’s generic <a class="reference external" href="https://microsoft.github.io/CCF/developers/demo.html">end-to-end JSON scenario</a> test - read that for an overview of the general scenario format.</p>
<p>This scenario is specified by <code class="docutils literal notranslate"><span class="pre">tests/erc20_transfers_scenario.json</span></code>. The transactions are similar to those above. First it calls <code class="docutils literal notranslate"><span class="pre">eth_sendTransaction</span></code> to deploy an ERC20 contract, then <code class="docutils literal notranslate"><span class="pre">eth_sendTransaction</span></code> to transfer tokens and <code class="docutils literal notranslate"><span class="pre">eth_call</span></code> to read token balances. One key difference is that this uses fixed addresses rather than generating fresh addresses (from new Ethereum identities) each run - this lets us statically predict the deployed contract address.</p>
<p>The simplest way to test running your own contracts and transactions against EVM for CCF is to edit this scenario file, or pass your own scenario file on the command line.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rpcinterface.html" class="btn btn-neutral float-left" title="RPC Interface" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Microsoft Corporation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>